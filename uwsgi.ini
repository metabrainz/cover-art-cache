[uwsgi]
# Application settings
module = cover_art_cache.app:app
callable = app

# Server settings
http = 0.0.0.0:8000
master = true
processes = 4
threads = 4
enable-threads = true

# Performance settings
buffer-size = 32768
listen = 100
max-requests = 1000
max-worker-lifetime = 3600
reload-mercy = 8
worker-reload-mercy = 8

# Logging  
# Disable request logging to avoid stdout rotation issues
# Application logs still go to stdout via Python logging
disable-logging = true
print = Starting Cover Art Cache Service...

# Security
uid = nobody
gid = nogroup
chmod-socket = 666

# Process management
die-on-term = true
vacuum = true

# Memory management
memory-report = true
reload-on-rss = 512